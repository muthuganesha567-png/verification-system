<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3498db;
            --primary-dark: #2980b9;
            --secondary: #2c3e50;
            --accent: #f39c12;
            --light: #f5f7fa;
            --white: #ffffff;
            --gradient-start: #3494E6;
            --gradient-end: #2c3e50;
            --card-bg: rgba(255, 255, 255, 0.1);
            --dropdown-bg: rgba(30, 40, 55, 0.95);
            --success: #2ecc71;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            perspective: 1000px;
        }
        
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .container {
            max-width: 1000px;
            width: 90%;
            margin: 0 auto;
            padding: 30px;
            z-index: 1;
        }
        
        /* Navigation */
        .nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .nav a {
            color: var(--white);
            text-decoration: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 500;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .nav a:hover {
            background: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        /* Header */
        .header {
            text-align: center;
            padding: 20px 0 40px;
        }
        
        .logo {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            background: linear-gradient(145deg, var(--primary), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform-style: preserve-3d;
            animation: float 6s ease-in-out infinite;
        }
        
        .logo i {
            font-size: 40px;
            color: white;
        }
        
        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            letter-spacing: 1.5px;
        }
        
        /* 3D Card */
        .card-3d {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transform-style: preserve-3d;
            transform: translateZ(20px);
            transition: transform 0.5s ease, box-shadow 0.5s ease;
            margin-bottom: 40px;
        }
        
        .card-3d:hover {
            transform: translateZ(30px) rotateX(5deg);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
        }
        
        /* Form Styling */
        .form-section {
            position: relative;
            margin-bottom: 25px;
        }
        
        .form-section label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--white);
        }
        
        .form-section input, .form-section select {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.07);
            color: var(--white);
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }
        
        .form-section input:focus, .form-section select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
            transform: translateZ(10px);
        }
        
        .form-section input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        /* Enhanced Dropdown Styling */
        .form-section select {
            background: var(--dropdown-bg);
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
            cursor: pointer;
        }
        
        .form-section option {
            background: var(--dropdown-bg);
            color: var(--white);
            padding: 10px;
        }
        
        /* File Upload Customization */
        .file-upload {
            position: relative;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .file-upload input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-upload-label {
            display: block;
            padding: 20px;
            border-radius: 10px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .file-upload-label:hover {
            border-color: var(--primary);
            color: var(--white);
            background: rgba(52, 152, 219, 0.1);
        }
        
        /* Button Styling */
        .submit-btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transform: translateZ(15px);
        }
        
        .submit-btn:hover {
            transform: translateY(-3px) translateZ(20px);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.3);
        }
        
        .submit-btn:active {
            transform: translateY(0) translateZ(15px);
        }
        
        /* Success Message */
        .success-message {
            color: var(--success);
            background: rgba(46, 204, 113, 0.1);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--success);
            margin: 25px 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        /* Blockchain Info */
        .blockchain-info {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border-left: 4px solid var(--accent);
        }
        
        .blockchain-info h3 {
            color: var(--accent);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .blockchain-hash {
            font-family: monospace;
            word-break: break-all;
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            margin: 10px 0;
            color: rgba(255, 255, 255, 0.9);
        }
        
        /* Animation Elements */
        .floating-elements {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            overflow: hidden;
        }
        
        .floating-element {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.03);
        }
        
        .floating-element:nth-child(1) {
            width: 300px;
            height: 300px;
            top: -150px;
            right: -150px;
            animation: float 20s ease-in-out infinite;
        }
        
        .floating-element:nth-child(2) {
            width: 200px;
            height: 200px;
            bottom: -100px;
            left: -100px;
            animation: float 15s ease-in-out infinite reverse;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(10deg);
            }
        }
        
        /* Enhanced visual effects */
        .glow-effect {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
            opacity: 0.1;
            filter: blur(40px);
            z-index: -1;
        }
        
        .glow-1 {
            top: 20%;
            left: 10%;
        }
        
        .glow-2 {
            bottom: 20%;
            right: 10%;
        }
        
        /* Certificate icons animation */
        .cert-icon {
            position: absolute;
            opacity: 0.1;
            font-size: 100px;
            color: var(--white);
            z-index: -1;
        }
        
        .cert-1 {
            top: 20%;
            left: 5%;
            animation: float 15s ease-in-out infinite;
        }
        
        .cert-2 {
            bottom: 20%;
            right: 5%;
            animation: float 18s ease-in-out infinite reverse;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .nav {
                flex-direction: column;
                align-items: center;
            }
            
            .nav a {
                width: 100%;
                text-align: center;
            }
            
            .card-3d {
                padding: 25px;
            }
        }
        
        hr {
            border: none;
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 30px 0;
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    
    <div class="floating-elements">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="glow-effect glow-1"></div>
        <div class="glow-effect glow-2"></div>
        <i class="fas fa-certificate cert-icon cert-1"></i>
        <i class="fas fa-award cert-icon cert-2"></i>
    </div>
    
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-lock"></i>
            </div>
            <h1>Admin Panel</h1>
        </div>
        
        <div class="nav">
            <a href="{{ url_for('index') }}">Home</a>
            <a href="{{ url_for('user') }}">User Verification</a>
            <a href="{{ url_for('history') }}">History</a>
            <a href="{{ url_for('view_blockchain') }}">View Blockchain</a>
        </div>
        
        <div class="card-3d">
            <!-- Upload Form -->
            <form method="POST" enctype="multipart/form-data">
                <div class="form-section">
                    <label>College Name:</label>
                    <input type="text" name="college_name" value="{{ college_name if college_name else '' }}" placeholder="College Name" required>
                </div>
                
                <div class="form-section">
                    <label>Address:</label>
                    <input type="text" name="address" value="{{ address if address else '' }}" placeholder="Address" required>
                </div>
                
                <div class="form-section">
                    <label>Degree:</label>
                    <select id="degree" name="degree" onchange="updateDepartments()" required>
                        <option value="">-- Select Degree --</option>
                        <option value="BSc" {% if degree == 'BSc' %}selected{% endif %}>BSc</option>
                        <option value="MSc" {% if degree == 'MSc' %}selected{% endif %}>MSc</option>
                        <option value="BTech" {% if degree == 'BTech' %}selected{% endif %}>BTech</option>
                        <option value="MTech" {% if degree == 'MTech' %}selected{% endif %}>MTech</option>
                        <option value="BA" {% if degree == 'BA' %}selected{% endif %}>BA</option>
                        <option value="MA" {% if degree == 'MA' %}selected{% endif %}>MA</option>
                        <option value="PhD" {% if degree == 'PhD' %}selected{% endif %}>PhD</option>
                    </select>
                </div>
                
                <div class="form-section">
                    <label>Department:</label>
                    <select id="department" name="department" required>
                        <option value="">-- Select Department --</option>
                    </select>
                </div>
                
                <div class="form-section">
                    <label>Year of Graduation:</label>
                    <input type="text" name="year" placeholder="Year of Graduation" required>
                </div>
                
                <div class="form-section">
                    <label>Upload Certificates:</label>
                    <div class="file-upload">
                        <label class="file-upload-label">
                            <i class="fas fa-cloud-upload-alt"></i> Choose Certificate Files
                        </label>
                        <input type="file" name="documents" multiple required>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn">Submit</button>
            </form>
            
            <!-- Show Success Message -->
            {% if request.method == 'POST' %}
                <div class="success-message">
                    <i class="fas fa-check-circle"></i>
                    <div>
                        <p style="font-weight: bold; margin: 0;">Data saved! College Code: {{ college_code }}</p>
                    </div>
                </div>
                
                <!-- Blockchain Verification Info -->
                <div class="blockchain-info">
                    <h3><i class="fas fa-link"></i> Blockchain Verification</h3>
                    <p>Your certificate has been securely stored on the blockchain with the following details:</p>
                    
                    {% for doc in uploaded_docs %}
                    <div style="margin-bottom: 20px;">
                        <p><strong>Document:</strong> {{ doc.filename }}</p>
                        <p><strong>Hash:</strong></p>
                        <div class="blockchain-hash">{{ doc.file_hash }}</div>
                        <p><strong>Block Index:</strong> {{ doc.block_index }}</p>
                    </div>
                    {% endfor %}
                    
                    <p><em>The hash above represents a unique digital fingerprint of your certificate that has been permanently recorded on the blockchain, making it tamper-proof and verifiable by anyone.</em></p>
                </div>
            {% endif %}
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Particles.js initialization
        particlesJS('particles-js', {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: "#ffffff" },
                shape: { type: "circle" },
                opacity: { value: 0.2, random: true },
                size: { value: 3, random: true },
                line_linked: {
                    enable: true,
                    distance: 150,
                    color: "#3498db",
                    opacity: 0.1,
                    width: 1
                },
                move: {
                    enable: true,
                    speed: 2,
                    direction: "none",
                    random: true,
                    straight: false,
                    out_mode: "out",
                    bounce: false
                }
            },
            interactivity: {
                detect_on: "canvas",
                events: {
                    onhover: { enable: true, mode: "grab" },
                    onclick: { enable: true, mode: "push" },
                    resize: true
                }
            },
            retina_detect: true
        });
        
        // Define course options
        const courses = {
            "BSc": [
                "Physics", "Chemistry", "Mathematics", "Biology", "Zoology", "Botany",
                "Biotechnology", "Environmental Science", "Computer Science", "Statistics",
                "Microbiology", "Geology", "Electronics", "Home Science", "Food Science & Nutrition"
            ],
            "MSc": [
                "Physics", "Chemistry", "Mathematics", "Biology", "Zoology", "Botany",
                "Biotechnology", "Environmental Science", "Computer Science", "Statistics",
                "Microbiology", "Geology", "Electronics", "Home Science", "Food Science & Nutrition"
            ],
            "BTech": [
                "Computer Science Engineering", "Electrical Engineering", "Electronics and Communication Engineering",
                "Electronics and Instrumentation Engineering", "Artificial Intelligence & Data Science",
                "Aerospace Engineering", "Agricultural Engineering", "Automobile Engineering",
                "Biotechnology Engineering", "Chemical Engineering", "Civil Engineering",
                "Environmental Engineering", "Industrial Engineering", "Information Technology",
                "Marine Engineering", "Mechanical Engineering", "Mechatronics Engineering",
                "Metallurgical Engineering", "Mining Engineering", "Petroleum Engineering",
                "Production Engineering", "Robotics Engineering", "Software Engineering",
                "Textile Engineering"
            ],
            "MTech": [
                "Computer Science Engineering", "Electrical Engineering", "Electronics and Communication Engineering",
                "Electronics and Instrumentation Engineering", "Artificial Intelligence & Data Science",
                "Aerospace Engineering", "Agricultural Engineering", "Automobile Engineering",
                "Biotechnology Engineering", "Chemical Engineering", "Civil Engineering",
                "Environmental Engineering", "Industrial Engineering", "Information Technology",
                "Marine Engineering", "Mechanical Engineering", "Mechatronics Engineering",
                "Metallurgical Engineering", "Mining Engineering", "Petroleum Engineering",
                "Production Engineering", "Robotics Engineering", "Software Engineering",
                "Textile Engineering"
            ],
            "BA": [
                "English", "History", "Political Science", "Economics", "Sociology",
                "Philosophy", "Psychology", "Geography", "Public Administration", "Journalism",
                "Fine Arts", "Performing Arts", "Anthropology", "Languages (Tamil, Hindi, French, etc.)",
                "Social Work", "Archaeology"
            ],
            "MA": [
                "English", "History", "Political Science", "Economics", "Sociology",
                "Philosophy", "Psychology", "Geography", "Public Administration", "Journalism",
                "Fine Arts", "Performing Arts", "Anthropology", "Languages (Tamil, Hindi, French, etc.)",
                "Social Work", "Archaeology"
            ],
            "PhD": [
                "All Disciplines (Science, Arts, Engineering, Commerce, Management)"
            ]
        };

        // Update department options when degree changes
        function updateDepartments() {
            const degree = document.getElementById("degree").value;
            const department = document.getElementById("department");

            // Clear old options
            department.innerHTML = "";

            // Populate new options
            if (courses[degree]) {
                courses[degree].forEach(course => {
                    const opt = document.createElement("option");
                    opt.value = course;
                    opt.textContent = course;
                    department.appendChild(opt);
                });
            }
        }
        
        // Initialize file upload display
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-load departments if a degree was pre-selected
            updateDepartments();
            {% if department %}
                document.getElementById("department").value = "{{ department }}";
            {% endif %}
            
            // File upload name display
            const fileInput = document.querySelector('input[type="file"]');
            const fileLabel = document.querySelector('.file-upload-label');
            
            fileInput.addEventListener('change', function() {
                if (this.files.length > 0) {
                    if (this.files.length === 1) {
                        fileLabel.innerHTML = `<i class="fas fa-file"></i> ${this.files[0].name}`;
                    } else {
                        fileLabel.innerHTML = `<i class="fas fa-files"></i> ${this.files.length} files selected`;
                    }
                } else {
                    fileLabel.innerHTML = `<i class="fas fa-cloud-upload-alt"></i> Choose Certificate Files`;
                }
            });
        });
    </script>
</body>
</html>